<!DOCTYPE html>
<meta charset="utf-8">
<style>
  * {
    font-family: sans-serif;
    font-size: 10pt;
  }
  .normal {
    font-weight: normal;
  }
  .bold {
    font-weight: bold;
  }
  .toolbox-rect {
    fill: #D3D3D3;
  }
  .rect {
    fill: #4682B4;
    stroke: none;
    stroke-width: 2px;
    pointer-events: all;
  }
  .line {
    stroke: #4682B4;
    stroke-dasharray: 3,3;
    stroke-width: 2px;
  }
</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

blocks = [
  { x: 0, y: 0 },
];

drag = d3.behavior.drag()
  .origin(Object)
  .on("drag", function(d) {
    d.x = d3.event.x;
    d.y = d3.event.y;
    drawRect();
  })
  .on("dragstart", function() {
    blocks.push({ x: 0, y: 0});
  });

svg = d3.select("body")
  .append("svg")
  .attr("width", 1000)
  .attr("height", 600);

drawToolboxRect();
drawRect();

function drawToolboxRect() {
  svg.append("rect")
     .attr("class", "toolbox-rect")
     .attr("width", 160)
     .attr("height", 500)
     .attr("x", 10)
     .attr("y", 10);

  setText(svg, 60,35, "bold", "Toolbox");
}

function drawRect() {
  group = svg.selectAll("g")
         .attr("transform", function(d) { return "translate("+d.x+","+d.y+")"; })
         .data(blocks);

  groupEnter = group.enter().append("g")
                .call(drag);

  groupEnter.append("rect")
       .attr("class", "rect")
       .attr("width", 100)
       .attr("height", 50)
       .attr("x", 40)
       .attr("y", 50);

  setText(groupEnter, 70, 80, "normal", "Object");

  groupEnter.append("line")
       .attr("class", "line")
       .attr("x1", 90)
       .attr("y1", 90)
       .attr("x2", 90)
       .attr("y2", 90 + 150);
}

function setText(object_, x, y, class_, text) {
  object_.append("text")
     .attr("class", class_)
     .attr("x", x)
     .attr("y", y)
     .text(text);
}

</script>
